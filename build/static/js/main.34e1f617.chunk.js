(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{165:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(57),i=a.n(o),c=(a(69),a(169)),s=a(166),l=(a(70),a(23)),d=a(24),u=a(27),m=a(26),h=a(28),f=a(167),k=a(168),b=a(170),g=a(8),v=a.n(g),w=a(16),p=a(9),y=new(a(58).a)("dexie");y.version(1).stores({drinks:"++id, date, time, class, name"});var E=y,C=a(59),D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={chart:a.props.chartData,chartx:{labels:["Beer","Wine","Cocktails"],datasets:[{label:"# of Drinks",data:[12,19,3],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)"],borderWidth:1}]}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return console.log(this.state,this.props),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(C.a,{data:this.props.chartData})))}}]),t}(r.a.Component);console.log(E);var W=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).addBeer=function(){var e=v()().format("HHmmss"),t={name:"beer",date:v()().format("YYMMDD"),time:e,class:"beer"};E.table("drinks").add(t),a.countDrinks(),a.makeCharts(),console.log(a.state)},a.addWine=function(){var e=v()().format("HHmmss"),t={name:"wine",date:v()().format("YYMMDD"),time:e,class:"wine"};E.table("drinks").add(t),a.countDrinks(),a.makeCharts()},a.addCocktail=function(){var e=v()().format("HHmmss"),t={name:"cocktail",date:v()().format("YYMMDD"),time:e,class:"cocktail"};E.table("drinks").add(t).then(function(){})},a.countDrinks=function(){var e=v()().format("YYMMDD");E.table("drinks").where("date").startsWith(e).toArray().then(function(e){a.setState({drinksToday:e})}),E.table("drinks").where("date").startsWith(e).and(function(e){return"beer"==e.class}).toArray().then(function(e){return a.setState({beersToday:e.length})}),E.table("drinks").where("date").startsWith(e).and(function(e){return"wine"==e.class}).toArray().then(function(e){return a.setState({winesToday:e.length})}),E.table("drinks").where("date").startsWith(e).and(function(e){return"cocktail"==e.class}).toArray().then(function(e){return a.setState({cocktailsToday:e.length})})},a.makeCharts=function(){var e={labels:["Beer","Wine","Cocktails"],datasets:[{label:"# of Drinks",data:[a.state.beersToday,a.state.winesToday,a.state.cocktailsToday],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)"],borderWidth:1}]};a.setState(function(t){return{chartData:e}}),console.log("xxx",a.state.chartData)},a.state={drinksToday:[]},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.countDrinks(),this.makeCharts()}},{key:"render",value:function(){return r.a.createElement(s.a,null,r.a.createElement(f.a,null),r.a.createElement(f.a,null,r.a.createElement(k.a,{sm:"6",md:"4"},r.a.createElement(f.a,null,r.a.createElement(b.a,{outline:!0,className:"spaced",color:"secondary",size:"lg",onClick:this.addBeer},r.a.createElement(w.a,{icon:p.a}),"Beer")),r.a.createElement(f.a,null,r.a.createElement(b.a,{outline:!0,className:"spaced",color:"secondary",size:"lg",onClick:this.addWine},r.a.createElement(w.a,{icon:p.d}),"Wine")),r.a.createElement(f.a,null,r.a.createElement(b.a,{outline:!0,className:"spaced",color:"secondary",size:"lg",onClick:this.addCocktail},r.a.createElement(w.a,{icon:p.c}),"Single")),r.a.createElement(f.a,null,r.a.createElement(b.a,{outline:!0,className:"spaced",color:"secondary",size:"lg",onClick:this.addCocktail},r.a.createElement(w.a,{icon:p.b}),"Double"))),r.a.createElement(k.a,{sm:"6",md:"8"},"today I've had: ",this.state.drinksToday.length," drinks",r.a.createElement("ol",null,this.state.drinksToday.map(function(e,t){return[r.a.createElement("li",{key:t},e.name," ",e.time)]}))),r.a.createElement(D,{chartData:this.state.chartData})))}}]),t}(r.a.Component);var T=function(){return r.a.createElement("div",null,r.a.createElement(c.a,{fluid:!0},r.a.createElement(s.a,{fluid:!0},r.a.createElement("h1",{className:"display-3"},"The drink tracker app"),r.a.createElement("p",{className:"lead"},"Now you know how much you've had to drink"))),r.a.createElement(W,null))},j=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function O(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(164);i.a.render(r.a.createElement(T,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");j?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):O(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):O(t,e)})}}()},64:function(e,t,a){e.exports=a(165)},69:function(e,t,a){},70:function(e,t,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.34e1f617.chunk.js.map